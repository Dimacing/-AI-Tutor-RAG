# Пошаговая инструкция

Краткий гайд по созданию MVP AI-репетитора.

1) Определите scope
   - Выберите 1-2 дисциплины и небольшой набор источников для MVP.

2) Соберите источники
   - Запишите URL или локальные файлы в `data/sources.json`.
   - У каждого источника должны быть заголовок и ссылка.

3) Инжест и очистка
   - Для каждой страницы удалите навигацию и служебные блоки.
   - Нормализуйте пробелы и оставьте основной текст.

4) Чанкинг
   - Разбейте документы на абзацы с перекрытием.
   - Держите чанки в диапазоне 800-1200 символов.

5) Эмбеддинги и индекс
   - Постройте эмбеддинги через `sentence-transformers`.
   - Сохраните эмбеддинги в локальную векторную БД Qdrant (`data/index/qdrant`), чанки в `data/index/chunks.json`.

6) Поиск
   - Эмбеддите запрос пользователя и вычислите косинусное сходство.
   - Отберите top-k и отфильтруйте низкие скоры.

7) Промптинг
   - Включите в промпт фрагменты источников с ID и URL.
   - Требуйте цитаты и вопрос для самопроверки.

8) Генерация ответа
   - Вызовите LLM (OpenAI, Gemini, DeepSeek, Ollama, GigaChat).
   - Проверьте, что ответ ссылается на источники.

9) UI
   - Поднимите `/query` в FastAPI.
   - Используйте веб-UI, Streamlit или Telegram-бота.

10) Безопасность и эксплуатация
   - Добавьте проверки profanity + PII.
   - Логируйте события, добавьте `/health` и `/metrics`.

11) Демонстрация
   - Подготовьте 2-3 вопроса и один негативный кейс.

## Запуск через Docker
1) Скопируйте `.env.example` в `.env` и заполните ключи.
2) Запустите API:
```
docker compose up --build
```
3) Откройте `http://localhost:8000`.
4) (Опционально) Streamlit:
```
docker compose --profile streamlit up --build
```
5) (Опционально) Telegram-бот:
```
docker compose --profile bot up --build
```
